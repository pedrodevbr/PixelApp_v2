<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="images/new_favicon.png" type="image/png" />
    <title>Falling Image App</title>

    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/partials/page-header.css" />
    <link rel="stylesheet" href="styles/partials/cards.css" />
    <link rel="stylesheet" href="styles/partials/buttons.css" />
    <link rel="stylesheet" href="styles/partials/forms.css" />
    <link rel="stylesheet" href="styles/partials/animations.css" />
    <link rel="stylesheet" href="styles/pages/job.css" />

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

  </head>
  <body>
    <script src='scripts/main.js'></script>
    <header class="page-header inner">
      <h1 align='center'>Transform your image</h1>
    </header>

    <div class="container flex animate-up delay-2">
      <main>
        <div id="form-job">
          <fieldset>
            <legend>Image</legend>
            <div class="separator light"></div>

            <div class="input-group">
              <div class="input-wrapper">
                <label for="Image ID">Image ID</label>
                <input 
                  type="number"
                  step="1" 
                  id="image_id input" 
                  />
                  <h3 style='color:black' align='center'>Features found:</h1>
                  <p id='features_found' style="color:black;"align='center' >-</p>
                  
                  <div class="input-group">
                    
                    <label for="Falling FPS">
                      Options:
                    </p>
                    <input
                      type="number"
                      id=fps
                      step="1" 
                      placeholder = 'Frames per second'
                    />

                  </div>
                  <button class="button orange" onclick='rotate()'>Rotate Image</button>                  
                  <div >
                    <button id='fall' style='padding: 0.5rem 4rem;margin: 20px;' class="button red" onclick='melt(img_array,blocked_pixels)'>Fall</button>
                  </div>
                </div>

              
              <div class="input-wrapper">
                <label for="total-hours">Selected</label>
                <div>
                  <canvas width="240" height="240" id='selected_image'>
                  
                </div>
                
              </div>
            </div>
            
          </fieldset>
          
        </div>
      </main>
      <aside class="card">
        <div>
          <canvas id='result_image' width="240" height="240"> </canvas>
        </div>

        <script> 
          function save_image(){
            let image_id = document.getElementById('image_id input').value
            var canvas = document.getElementById( 'result_image' );  
            // get canvas data  
            var image = canvas.toDataURL();  
            
            // create temporary link  
            var tmpLink = document.createElement( 'a' );  
            tmpLink.download = `image${image_id}_result.png`; // set the name of the download file 
            tmpLink.href = image;  

            // temporarily add link to body and initiate the download  
            document.body.appendChild( tmpLink );  
            tmpLink.click();  
            document.body.removeChild( tmpLink ); 
          }
        </script>
        <button onclick='save_image()'
              class="button green"  
             >Download Image</button>
      </aside>
      
    </div>
    
    <!-- end container -->
  </body>
</html>
 